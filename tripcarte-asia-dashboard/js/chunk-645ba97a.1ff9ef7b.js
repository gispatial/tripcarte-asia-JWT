(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-645ba97a"],{"06db":function(t,e,a){"use strict";var s=a("23c6"),i={};i[a("2b4c")("toStringTag")]="z",i+""!="[object z]"&&a("2aba")(Object.prototype,"toString",(function(){return"[object "+s(this)+"]"}),!0)},2285:function(t,e,a){},"3b9e":function(t,e,a){"use strict";var s=a("2285"),i=a.n(s);i.a},"5df3":function(t,e,a){"use strict";var s=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=s(e,a),this._i+=t.length,{value:t,done:!1})}))},"61b81":function(t,e,a){"use strict";var s=a("d520"),i=a.n(s);i.a},"69ef":function(t,e,a){"use strict";var s={commissions:[]},i={SET_COMMISSIONS:function(t,e){t.commissions=e}},r=a("bb36"),n=(a("eb70"),{getCommissions:function(t){var e=t.commit;return new Promise((function(t,a){r["a"].get("https://partners.tripcarte.asia/wp-json/tripcarte_api/v1/commissions",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}).then((function(a){e("SET_COMMISSIONS",a.data),t(a)})).catch((function(t){a(t)}))}))}}),o={};e["a"]={isRegistered:!1,namespaced:!0,state:s,mutations:i,actions:n,getters:o}},a9cc:function(t,e,a){"use strict";var s=a("5ca1"),i=a("a5b8"),r=a("9c80");s(s.S,"Promise",{try:function(t){var e=i.f(this),a=r(t);return(a.e?e.reject:e.resolve)(a.v),e.promise}})},ab35:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("data-view-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar}}),a("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":t.itemsPerPage,search:"",data:t.commissions},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return[a("tbody",t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",[a("p",[t._v(t._s(e.order_id))])]),a("vs-td",[a("p",{staticClass:"font-medium truncate"},[t._v(t._s(e.product_name))]),t._l(e.attributes,(function(s,i){return a("div",{key:i},[a("vs-chip",{staticClass:"product-order-status",attrs:{color:t.getOrderStatusColor(e.attributes)}},[t._v(" "+t._s(s.option_name))])],1)}))],2),[a("vs-td",[a("p",[t._v("RM "+t._s(e.product_amount))]),a("p",[t._v(" ")])])],a("vs-td",[a("p",[t._v(t._s(e.product_quantity))]),a("p",[t._v(" ")])]),a("vs-td",[a("p",[t._v(t._s(e.redeem_qty))]),a("p",[t._v(" ")])]),a("vs-td",[a("p",{staticClass:"font-medium"},[t._v(t._s(e.redeem_date_gmt))])]),a("vs-td",[a("p",[t._v(t._s(e.redeem_user))])]),a("vs-td",[a("p",{staticClass:"font-medium"},[a("vs-chip",{staticClass:"product-order_status",attrs:{color:t.getOrderStatusColor(e.order_status),data:"myData",isActive:"myIsActive"}},[t._v(" Redeemed ")])],1)]),a("vs-td",[a("p",[t._v(" ")]),a("vs-chip",{staticClass:"product-order-status",attrs:{color:t.getOrderStatusColor(e.order_status)}},[t._v(t._s(t._f("title")(e.commission_status)))])],1),a("vs-td",[a("p",[t._v(t._s(e.paid_date))])])],2)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[a("vs-prompt",{staticClass:"export-options",attrs:{title:"Export To Excel","accept-text":"Export",active:t.activePrompt},on:{cancle:t.clearFields,accept:t.exportToExcel,close:t.clearFields,"update:active":function(e){t.activePrompt=e}}},[a("vs-input",{staticClass:"w-full",attrs:{placeholder:"Enter File Name.."},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),a("div",{staticClass:"flex"},[a("span",{staticClass:"mr-4"},[t._v("Cell Auto Width:")]),a("vs-switch",{model:{value:t.cellAutoWidth,callback:function(e){t.cellAutoWidth=e},expression:"cellAutoWidth"}},[t._v("Cell Auto Width")])],1)],1),a("div",[a("vs-button",{staticClass:"mb-4 md:mb-0",on:{click:function(e){t.activePrompt=!0}}},[t._v("  Export")])],1)],1),a("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.commissions.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.commissions.length)+" of "+t._s(t.queriedItems))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=4}}},[a("span",[t._v("4")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=15}}},[a("span",[t._v("15")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[a("span",[t._v("20")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",[t._v("Order ID")]),a("vs-th",[t._v("Item")]),a("vs-th",[t._v("Item Price")]),a("vs-th",[t._v("Total Tickets")]),a("vs-th",[t._v("Total Redeemed")]),a("vs-th",[t._v("Redeemed Date")]),a("vs-th",[t._v("Redeemed By")]),a("vs-th",[t._v("Redemption Status")]),a("vs-th",{attrs:{"sort-key":"commission_status"}},[t._v("Payment Status")]),a("vs-th",[t._v("Payment Date")])],1)],2)],1)},i=[],r=(a("6d67"),a("4a7a")),n=a.n(r),o=a("be26"),c=a("69ef"),d={components:{DataViewSidebar:o["a"],vSelect:n.a},data:function(){return{selected:[],products:[],itemsPerPage:5,isMounted:!1,addNewDataSidebar:!1,sidebarData:{},fileName:"",formats:["xlsx","csv","txt"],cellAutoWidth:!0,selectedFormat:"xlsx",headerTitle:["Order ID","Item","Item Price","Total Tickets","Total Redeemed","Redeemed Date","Redeemed By","Redemption Status","Payment Status","Payment Date"],headerVal:["order_id","product_name","product_amount","product_quantity","redeem_qty","redeem_date_gmt","redeem_user","paid_date","paid_date","paid_date"],activePrompt:!1}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},commissions:function(){return this.$store.state.commission.commissions},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.commissions.length}},methods:{exportToExcel:function(){var t=this;Promise.all([a.e("chunk-1fadd168"),a.e("chunk-4c7135e0")]).then(a.bind(null,"4bf8d")).then((function(e){var a=t.selected,s=t.formatJson(t.headerVal,a);e.export_json_to_excel({header:t.headerTitle,data:s,filename:t.fileName,autoWidth:t.cellAutoWidth,bookType:t.selectedFormat}),t.clearFields()}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))},clearFields:function(){this.fileName="",this.cellAutoWidth=!0,this.selectedFormat="xlsx"},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){this.$store.dispatch("dataList/removeItem",t).catch((function(t){console.error(t)}))},editData:function(t){this.sidebarData=JSON.parse(JSON.stringify(this.blankData)),this.sidebarData=t,this.toggleDataSidebar(!0)},getOrderStatusColor:function(t){return"Unpaid"==t?"warning":"Redeemed"==t?"success":"Unpaid"==t?"danger":"primary"},getPopularityColor:function(t){return t>90?"success":t>70?"primary":t>=50?"warning":t<50?"danger":"primary"},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t}},created:function(){c["a"].isRegistered||(this.$store.registerModule("commission",c["a"]),c["a"].isRegistered=!0)},mounted:function(){this.$store.dispatch("commission/getCommissions"),this.isMounted=!0}},l=d,u=(a("3b9e"),a("2877")),m=Object(u["a"])(l,s,i,!1,null,null,null);e["default"]=m.exports},be26:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v(t._s(0===Object.entries(this.data).length?"ADD NEW":"UPDATE")+" ITEM")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),a("vs-divider",{staticClass:"mb-0"}),a("VuePerfectScrollbar",{key:t.$vs.rtl,staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[t.dataImg?[a("div",{staticClass:"img-container w-64 mx-auto flex items-center justify-center"},[a("img",{staticClass:"responsive",attrs:{src:t.dataImg,alt:"img"}})]),a("div",{staticClass:"modify-img flex justify-between mt-5"},[a("input",{ref:"updateImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{staticClass:"mr-4",attrs:{type:"flat"},on:{click:function(e){return t.$refs.updateImgInput.click()}}},[t._v("Update Attractions")]),a("vs-button",{attrs:{type:"flat",color:"#999"},on:{click:function(e){t.dataImg=null}}},[t._v("Remove Image")])],1)]:t._e(),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"Name",name:"item-name"},model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-name")))]),a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"Category",name:"item-category"},model:{value:t.dataCategory,callback:function(e){t.dataCategory=e},expression:"dataCategory"}},t._l(t.category_choices,(function(t){return a("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.text}})})),1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-category"),expression:"errors.has('item-category')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-category")))]),a("vs-select",{staticClass:"mt-5 w-full",attrs:{label:"Order Status"},model:{value:t.dataOrder_status,callback:function(e){t.dataOrder_status=e},expression:"dataOrder_status"}},t._l(t.order_status_choices,(function(t){return a("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.text}})})),1),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/\d+(\.\d+)?$/},expression:"{ required: true, regex: /\\d+(\\.\\d+)?$/ }"}],staticClass:"mt-5 w-full",attrs:{"icon-pack":"feather",icon:"icon-dollar-sign",label:"Price",name:"item-price"},model:{value:t.dataPrice,callback:function(e){t.dataPrice=e},expression:"dataPrice"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-price"),expression:"errors.has('item-price')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-price")))]),t.dataImg?t._e():a("div",{staticClass:"upload-img mt-5"},[a("input",{ref:"uploadImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{on:{click:function(e){return t.$refs.uploadImgInput.click()}}},[t._v("Upload Image")])],1)],2)]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",attrs:{disabled:!t.isFormValid},on:{click:t.submitData}},[t._v("Submit")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("Cancel")])],1)],1)},i=[],r=(a("7f7f"),a("ac6a"),a("ffc1"),a("9d63")),n=a.n(r),o={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},watch:{isSidebarActive:function(t){if(t)if(0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),a=e.category,s=e.id,i=e.img,r=e.name,n=e.order_status,o=e.price;this.dataId=s,this.dataCategory=a,this.dataImg=i,this.dataName=r,this.dataOrder_status=n,this.dataPrice=o,this.initValues()}}},data:function(){return{dataId:null,dataName:"",dataCategory:null,dataImg:null,dataOrder_status:"pending",dataPrice:0,category_choices:[{text:"TOP DESTINATIONS",value:"audio"},{text:"SPECIAL PROMOTION",value:"computers"},{text:"MOST POPULAR",value:"Langkawi"},{text:"NEW ATTRACTIONS",value:"appliance"}],order_status_choices:[{text:"Pending",value:"pending"},{text:"Canceled",value:"canceled"},{text:"Completed",value:"completed"},{text:"On Hold",value:"on_hold"}],settings:{maxScrollbarLength:60,wheelSpeed:.6}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName&&this.dataCategory&&this.dataPrice>0}},methods:{initValues:function(){this.data.id||(this.dataId=null,this.dataName="",this.dataCategory=null,this.dataOrder_status="pending",this.dataPrice=0,this.dataImg=null)},submitData:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var a={id:t.dataId,name:t.dataName,img:t.dataImg,category:t.dataCategory,order_status:t.dataOrder_status,price:t.dataPrice};null!==t.dataId&&t.dataId>=0?t.$store.dispatch("dataList/updateItem",a).catch((function(t){console.error(t)})):(delete a.id,a.popularity=0,t.$store.dispatch("dataList/addItem",a).catch((function(t){console.error(t)}))),t.$emit("closeSidebar"),t.initValues()}}))},updateCurrImg:function(t){var e=this;if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=function(t){e.dataImg=t.target.result},a.readAsDataURL(t.target.files[0])}}},components:{VuePerfectScrollbar:n.a}},c=o,d=(a("61b81"),a("2877")),l=Object(d["a"])(c,s,i,!1,null,"31e95db2",null);e["a"]=l.exports},d520:function(t,e,a){},eb70:function(t,e,a){a("06db"),a("5df3"),a("ac6a"),a("551c"),a("097d"),a("a9cc"),t.exports=a("8378").Promise}}]);
//# sourceMappingURL=chunk-645ba97a.1ff9ef7b.js.map